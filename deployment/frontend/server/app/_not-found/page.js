(()=>{var e={};e.id=492,e.ids=[492],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1135:()=>{},1630:e=>{"use strict";e.exports=require("http")},1820:e=>{"use strict";e.exports=require("os")},1981:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))},2006:(e,t,r)=>{Promise.resolve().then(r.bind(r,3758)),Promise.resolve().then(r.bind(r,2843))},2394:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>s});var o=r(2907);let s=(0,o.registerClientReference)(function(){throw Error("Attempted to call AuthProvider() from the server but AuthProvider is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\AI-FOR-GOOD-2025-Gumball\\frontend\\src\\app\\context\\AuthContext.tsx","AuthProvider");(0,o.registerClientReference)(function(){throw Error("Attempted to call useAuth() from the server but useAuth is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\AI-FOR-GOOD-2025-Gumball\\frontend\\src\\app\\context\\AuthContext.tsx","useAuth")},2412:e=>{"use strict";e.exports=require("assert")},2843:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>v,A:()=>x});var o=r(687),s=r(3210),n=r(6189),a=r(5659),i=r(8222),l=r(1060);let d=(e,t,r)=>{console.log(`API ${e} ${t}`,r||"")},u=l.A.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});u.interceptors.request.use(e=>e,e=>Promise.reject(e));let c=async e=>{try{d("POST","/auth/login",{email:e.email});let t=new URLSearchParams;t.append("username",e.email),t.append("password",e.password);let r=await u.post("/auth/login",t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return console.log("Login successful:",r.data),r.data}catch(t){console.error("Login failed:",t.response?.data||t.message);try{d("POST","/auth/login-simple",{email:e.email});let t=await u.post("/auth/login-simple",e);return console.log("Simple login successful:",t.data),t.data}catch(e){throw console.error("Simple login also failed:",e.response?.data||e.message),Error(t.response?.data?.detail||e.response?.data?.detail||"Login failed")}}},p=async e=>{try{d("POST","/auth/register",{email:e.email});let t=await u.post("/auth/register",{email:e.email,password:e.password,is_active:!0,is_superuser:!1});console.log("Registration successful:",t.data)}catch(e){throw console.error("Registration failed:",e.response?.data||e.message),Error(e.response?.data?.detail||"Registration failed")}},h=async e=>{try{d("POST","/auth/test-token");let t=await u.post("/auth/test-token",{},{headers:{Authorization:`Bearer ${e}`}});return console.log("Got current user:",t.data),t.data}catch(t){console.error("Failed to get user data:",t.response?.data||t.message);try{d("GET","/auth/me");let t=await u.get("/auth/me",{headers:{Authorization:`Bearer ${e}`}});return console.log("Got user from /me endpoint:",t.data),t.data}catch(e){throw console.error("Failed to get user data from /me endpoint:",e.response?.data||e.message),Error(t.response?.data?.detail||e.response?.data?.detail||"Failed to get user data")}}},m=async(e,t)=>{try{let r=await u.post("/api/auth/refresh-token",{},{headers:{Authorization:`Bearer ${e}`,refreshToken:t}});a.A.set("token",r.data.access_token,{expires:1})}catch(t){let e=t.response?.data||t.message;throw console.error("Failed to refresh token:",e),Error(e||"Failed to get user data")}},g={user:null,token:null,refToken:null,isAuthenticated:!1,isLoading:!0,error:null},f=(0,s.createContext)(void 0),v=({children:e})=>{let[t,r]=(0,s.useState)(g),l=(0,n.useRouter)();(0,s.useEffect)(()=>{(async()=>{let e=a.A.get("token"),t=a.A.get("refreshToken");if(e)try{let o=await h(e);r({user:o,token:e,refToken:t,isAuthenticated:!0,isLoading:!1,error:null}),console.log("User authenticated:",o.email)}catch(e){console.error("Authentication error:",e),a.A.remove("token"),r({...g,isLoading:!1})}else console.log("No token found, user not authenticated"),r({...g,isLoading:!1})})()},[]);let d=async e=>{try{console.log("Login attempt with:",e.email),r({...t,isLoading:!0,error:null});let o=await c(e);console.log("Full login response:",o);let n=o.access_token;if(!n)throw Error("No access token received");let d=o.refresh_token||null;d||console.log("No refresh token received. Login session will expire soon."),a.A.set("token",n,{expires:1}),a.A.set("refreshToken",d,{expires:7}),console.log("Tokens saved in cookie");let u=await h(n);console.log("User data retrieved:",u),r({user:u,token:n,refToken:d,isAuthenticated:!0,isLoading:!1,error:null}),(0,s.useEffect)(()=>{let e=setInterval(async()=>{let e=a.A.get("token"),t=a.A.get("refreshToken");if(e&&t){let{exp:r}=JSON.parse(atob(e.split(".")[1])),o=Math.floor(Date.now()/1e3);r-o<300&&m(e,t)}},6e4);return()=>clearInterval(e)},[]),i.oR.success("Login successful!"),l.push("/dashboard")}catch(o){console.error("Login error details:",o);let e="Invalid email or password";o.message?e=o.message:o.response?.data?.detail&&(e=o.response.data.detail),r({...t,isLoading:!1,error:e}),i.oR.error("Login failed. Please check your credentials.")}},u=async e=>{try{r({...t,isLoading:!0,error:null}),await p(e),r({...t,isLoading:!1}),i.oR.success("Registration successful! Please login."),l.push("/login")}catch(e){r({...t,isLoading:!1,error:"Registration failed"}),i.oR.error("Registration failed. Please try again.")}};return(0,o.jsx)(f.Provider,{value:{...t,login:d,register:u,logout:()=>{a.A.remove("token"),r({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null}),l.push("/login"),i.oR.info("You have been logged out.")}},children:e})},x=()=>{let e=(0,s.useContext)(f);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3758:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var o=r(687),s=r(3210),n=r(6189),a=r(2843);let i=["/dashboard","/upload","/patients","/profile","/settings"],l=({children:e})=>{let{isAuthenticated:t,isLoading:r}=(0,a.A)(),l=(0,n.useRouter)(),d=(0,n.usePathname)();return((0,s.useEffect)(()=>{!r&&(!t&&i.some(e=>d.startsWith(e))&&l.push("/login"),t&&["/login","/register"].includes(d)&&l.push("/dashboard"))},[t,r,d,l]),r)?(0,o.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,o.jsx)(o.Fragment,{children:e})}},3873:e=>{"use strict";e.exports=require("path")},3997:e=>{"use strict";e.exports=require("tty")},4002:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>p,tree:()=>d});var o=r(5239),s=r(8088),n=r(8170),a=r.n(n),i=r(893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d={children:["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"C:\\AI-FOR-GOOD-2025-Gumball\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,u=[],c={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4075:e=>{"use strict";e.exports=require("zlib")},4431:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>u});var o=r(7413),s=r(2376),n=r.n(s),a=r(8726),i=r.n(a);r(1135);var l=r(2394),d=r(9964);let u={title:"MedScan AI - Medical Imaging Analysis",description:"AI-powered analysis of CT, MRI, and X-ray scans for disease detection"};function c({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:`${n().variable} ${i().variable} antialiased`,children:(0,o.jsx)(l.AuthProvider,{children:(0,o.jsx)(d.default,{children:e})})})})}},4735:e=>{"use strict";e.exports=require("events")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},7910:e=>{"use strict";e.exports=require("stream")},8013:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},8354:e=>{"use strict";e.exports=require("util")},8958:(e,t,r)=>{Promise.resolve().then(r.bind(r,9964)),Promise.resolve().then(r.bind(r,2394))},9021:e=>{"use strict";e.exports=require("fs")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9964:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});let o=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\AI-FOR-GOOD-2025-Gumball\\\\frontend\\\\src\\\\app\\\\components\\\\auth\\\\AuthGuard.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\AI-FOR-GOOD-2025-Gumball\\frontend\\src\\app\\components\\auth\\AuthGuard.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,717],()=>r(4002));module.exports=o})();